# SCR-001: ホーム画面（記録一覧）

## 基本情報

| 項目 | 内容 |
|:---|:---|
| 画面ID | SCR-001 |
| 画面名 | ホーム（記録一覧） |
| 対応機能 | F-03 過去の記録一覧 |
| 役割 | アプリ起動時のメイン画面 |

## 画面レイアウト

### リスト表示（デフォルト）

```
┌─────────────────────────────────┐
│ Umapic           [🔍] [⊞/☰]   │ ← 表示切替ボタン
├─────────────────────────────────┤
│ [日付順 ▼] [評価順] [店名順]    │
├─────────────────────────────────┤
│                                 │
│ ┌───────┬───────────────────┐  │
│ │       │ラーメン二郎     ⭐4.5│  │
│ │  📷   │渋谷区道玄坂         │  │
│ │       │2024/12/01 | 友人と  │  │
│ └───────┴───────────────────┘  │
│                                 │
│ ┌───────┬───────────────────┐  │
│ │       │スターバックス   ⭐4.0│  │
│ │  📷   │新宿区西新宿         │  │
│ │       │2024/11/28 | 1人     │  │
│ └───────┴───────────────────┘  │
│                                 │
│ ┌───────┬───────────────────┐  │
│ │       │焼肉きんぐ       ⭐5.0│  │
│ │  📷   │目黒区自由が丘       │  │
│ │       │2024/11/20 | 家族と  │  │
│ └───────┴───────────────────┘  │
│                                 │
│            [＋]                 │ ← FAB
│                                 │
├─────────────────────────────────┤
│   [📋]        [🗺️]             │
│   ホーム       マップ            │
└─────────────────────────────────┘
```

### グリッド表示（Instagram風）

```
┌─────────────────────────────────┐
│ Umapic           [🔍] [⊞/☰]   │
├─────────────────────────────────┤
│ [日付順 ▼] [評価順] [店名順]    │
├─────────────────────────────────┤
│                                 │
│ ┌─────┐ ┌─────┐ ┌─────┐       │
│ │     │ │     │ │     │       │
│ │ 📷  │ │ 📷  │ │ 📷  │       │
│ │     │ │     │ │     │       │
│ └─────┘ └─────┘ └─────┘       │
│                                 │
│ ┌─────┐ ┌─────┐ ┌─────┐       │
│ │     │ │     │ │     │       │
│ │ 📷  │ │ 📷  │ │ 📷  │       │
│ │     │ │     │ │     │       │
│ └─────┘ └─────┘ └─────┘       │
│                                 │
│ ┌─────┐ ┌─────┐ ┌─────┐       │
│ │     │ │     │ │     │       │
│ │ 📷  │ │ 📷  │ │ 📷  │       │
│ │     │ │     │ │     │       │
│ └─────┘ └─────┘ └─────┘       │
│                                 │
│            [＋]                 │
│                                 │
├─────────────────────────────────┤
│   [📋]        [🗺️]             │
│   ホーム       マップ            │
└─────────────────────────────────┘
```

## UI要素詳細

### ナビゲーションバー

| 要素ID | 種類 | アクション |
|:---|:---|:---|
| btn_search | Icon Button | 検索モーダル表示 |
| btn_view_toggle | Icon Button | リスト/グリッド切替 |

### 表示切替ボタン

| 状態 | アイコン | 説明 |
|:---|:---|:---|
| リスト表示中 | ⊞ (グリッド) | タップでグリッドに切替 |
| グリッド表示中 | ☰ (リスト) | タップでリストに切替 |

### フィルタータブ

| 要素ID | 種類 | 説明 |
|:---|:---|:---|
| filter_date | Chip | 日付順ソート（デフォルト） |
| filter_rating | Chip | 評価順ソート |
| filter_name | Chip | 店名順ソート |

### リストアイテム

| 要素ID | 種類 | 説明 |
|:---|:---|:---|
| item_thumbnail | Image | サムネイル画像（80x80） |
| item_store_name | Label | 店舗名（太字） |
| item_rating | Rating | 評価（星＋数値） |
| item_address | Label | 住所（区名＋町名） |
| item_date | Label | 訪問日 |
| item_companion | Label | 同行者タグ |

### グリッドアイテム

| 要素ID | 種類 | 説明 |
|:---|:---|:---|
| grid_thumbnail | Image | 正方形サムネイル（画面幅の1/3） |
| grid_overlay | View | 長押し時に店舗名オーバーレイ表示 |

### タブバー

| 要素ID | 種類 | 説明 |
|:---|:---|:---|
| tab_home | Tab Item | ホーム（アクティブ） |
| tab_map | Tab Item | マップ画面へ |

## 表示モード

### リスト表示

| 項目 | 値 |
|:---|:---|
| サムネイルサイズ | 80x80pt |
| 行の高さ | 約100pt |
| 表示情報 | 店名、評価、住所、日付、同行者 |

### グリッド表示

| 項目 | 値 |
|:---|:---|
| 列数 | 3列 |
| アイテムサイズ | 画面幅 / 3（正方形） |
| 間隔 | 2pt |
| 表示情報 | 写真のみ（タップで詳細へ） |
| 長押し | 店舗名をオーバーレイ表示 |

### 表示設定の保存

- 選択した表示モードはUserDefaultsに保存
- 次回起動時に復元

## スワイプアクション（リスト表示のみ）

| 方向 | アクション | 色 |
|:---|:---|:---|
| 左スワイプ | 削除 | 赤 |
| 右スワイプ | 編集 | 青 |

## ソートオプション

| オプション | 説明 | デフォルト |
|:---|:---|:---|
| 日付順（新しい順） | VisitDate DESC | ○ |
| 日付順（古い順） | VisitDate ASC | |
| 評価順（高い順） | Rating DESC | |
| 評価順（低い順） | Rating ASC | |
| 店名順（A-Z） | StoreName ASC | |

## 検索機能

### 検索モーダル

```
┌─────────────────────────────────┐
│ [×]    検索                     │
├─────────────────────────────────┤
│  ┌───────────────────────────┐  │
│  │ 🔍 キーワードを入力        │  │
│  └───────────────────────────┘  │
│                                 │
│  最近の検索                     │
│  ・ラーメン                     │
│  ・渋谷                         │
│  ・家族と                       │
│                                 │
└─────────────────────────────────┘
```

### 検索対象フィールド

- 店舗名 (StoreName)
- メモ (Note)
- 同行者 (CompanionList)
- 住所 (Address)

## 状態管理

### 画面状態

| 状態 | 説明 |
|:---|:---|
| loading | データ読み込み中（スケルトン表示） |
| loaded | リスト/グリッド表示完了 |
| empty | 記録なし（空状態表示） |
| searching | 検索中 |
| search_empty | 検索結果なし |
| error | エラー発生 |

### 空状態表示

```
┌─────────────────────────────────┐
│                                 │
│         [イラスト]              │
│                                 │
│    まだ記録がありません          │
│                                 │
│    最初の思い出を記録しましょう   │
│                                 │
│    [最初の記録を作成]            │
│                                 │
└─────────────────────────────────┘
```

### ページネーション

| 項目 | 値 |
|:---|:---|
| 1ページあたり | 20件 |
| 読み込み方式 | 無限スクロール |
| ローディング | リスト末尾にインジケータ |

## API連携

| タイミング | API | パラメータ |
|:---|:---|:---|
| 画面表示時 | GET /records | sort=date&order=desc&limit=20 |
| スクロール時 | GET /records | + cursor |
| Pull to Refresh | GET /records | 最初から再取得 |
| 検索時 | GET /records | + keyword |

## 遷移先

| アクション | 遷移先 |
|:---|:---|
| アイテムタップ | SCR-004 記録詳細画面 |
| FABタップ | SCR-003 記録作成画面 |
| マップタブタップ | SCR-002 マップ画面 |
| 編集スワイプ | SCR-003 記録編集画面 |
